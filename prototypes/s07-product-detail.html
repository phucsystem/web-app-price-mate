<!--
  Screen: S-07 Product Detail
  CJX Stage: Usage
  FR Mapping: FR-05, FR-06, FR-09
-->
<!DOCTYPE html>
<html lang="en-AU">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sony WH-1000XM5 — PriceMate AU</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="components.css">
</head>
<body class="cjx-usage">
  <a href="#main" class="skip-link">Skip to content</a>
  <div class="app-layout">

    <!-- NavBar -->
    <nav class="navbar" aria-label="Main navigation">
      <a href="s01-landing-page.html" class="navbar-logo">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#1976D2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
        <span class="brand-price">Price</span><span class="brand-mate">Mate</span> <span style="font-weight:400;font-size:14px;color:var(--color-text-soft)">AU</span>
      </a>
      <div class="navbar-search">
        <div class="search-bar">
          <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <input type="text" class="form-input" placeholder="Search Amazon AU products...">
        </div>
      </div>
      <div class="navbar-actions">
        <a href="s08-dashboard.html" class="navbar-link">Dashboard</a>
        <a href="s10-public-deals.html" class="navbar-link">Deals</a>
        <a href="#" class="navbar-link">Log Out</a>
      </div>
      <button class="nav-toggle" aria-label="Toggle navigation">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
      </button>
    </nav>

    <main id="main" class="main-content narrow" role="main" data-cjx-entrance>

      <!-- Product Header -->
      <div class="product-header" data-cjx-entrance>
        <img class="product-header-image" src="https://placehold.co/200x200/F8FAFC/64748B?text=Sony+WH-1000XM5" alt="Sony WH-1000XM5">
        <div class="product-header-info">
          <h1>Sony WH-1000XM5 Wireless Noise Cancelling Headphones</h1>
          <div style="display:flex; align-items:center; gap: var(--space-sm); margin-top: var(--space-sm);">
            <span class="price">$349.00</span>
            <span class="deal-badge great">Great Deal</span>
          </div>
          <a href="https://www.amazon.com.au" target="_blank" rel="noopener" class="amazon-link">
            View on Amazon AU
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
          </a>
          <p class="affiliate-disclosure">As an Amazon Associate we earn from qualifying purchases.</p>
        </div>
      </div>

      <!-- Price Chart -->
      <div class="chart-card mb-lg" data-cjx-entrance>
        <div class="chart-card-header">
          <h2>Price History</h2>
          <div class="toggle-group">
            <button class="toggle-btn">30d</button>
            <button class="toggle-btn active">90d</button>
            <button class="toggle-btn">180d</button>
            <button class="toggle-btn">1y</button>
            <button class="toggle-btn">All</button>
          </div>
        </div>
        <svg class="line-chart" viewBox="0 0 800 280" preserveAspectRatio="xMidYMid meet" style="width:100%; height:auto;">
          <!-- Y-axis labels -->
          <text x="40" y="38" text-anchor="end" fill="#757575" font-size="11" font-family="'SF Mono', 'Roboto Mono', monospace">$450</text>
          <text x="40" y="98" text-anchor="end" fill="#757575" font-size="11" font-family="'SF Mono', 'Roboto Mono', monospace">$400</text>
          <text x="40" y="158" text-anchor="end" fill="#757575" font-size="11" font-family="'SF Mono', 'Roboto Mono', monospace">$350</text>
          <text x="40" y="218" text-anchor="end" fill="#757575" font-size="11" font-family="'SF Mono', 'Roboto Mono', monospace">$300</text>
          <!-- Grid lines -->
          <g>
            <line x1="55" y1="33" x2="775" y2="33" stroke="#E0E0E0" stroke-dasharray="4"/>
            <line x1="55" y1="93" x2="775" y2="93" stroke="#E0E0E0" stroke-dasharray="4"/>
            <line x1="55" y1="153" x2="775" y2="153" stroke="#E0E0E0" stroke-dasharray="4"/>
            <line x1="55" y1="213" x2="775" y2="213" stroke="#E0E0E0" stroke-dasharray="4"/>
            <line x1="55" y1="253" x2="775" y2="253" stroke="#E0E0E0"/>
          </g>
          <!-- X-axis labels -->
          <text x="100" y="270" text-anchor="middle" fill="#757575" font-size="11">Dec</text>
          <text x="220" y="270" text-anchor="middle" fill="#757575" font-size="11">Jan</text>
          <text x="340" y="270" text-anchor="middle" fill="#757575" font-size="11">Jan</text>
          <text x="460" y="270" text-anchor="middle" fill="#757575" font-size="11">Feb</text>
          <text x="580" y="270" text-anchor="middle" fill="#757575" font-size="11">Feb</text>
          <text x="700" y="270" text-anchor="middle" fill="#757575" font-size="11">Mar</text>
          <!-- Area fill under line (green for drop zone) -->
          <polygon
            points="100,93 220,73 340,113 460,133 520,153 580,173 640,153 700,153 750,153 750,253 100,253"
            fill="rgba(56,142,60,0.07)"
          />
          <!-- Price line -->
          <polyline
            fill="none"
            stroke="#1976D2"
            stroke-width="2.5"
            stroke-linejoin="round"
            stroke-linecap="round"
            points="100,93 220,73 340,113 460,133 520,153 580,173 640,153 700,153 750,153"
          />
          <!-- Data points -->
          <circle cx="100" cy="93" r="4" fill="#1976D2"/>
          <circle cx="220" cy="73" r="4" fill="#1976D2"/>
          <circle cx="340" cy="113" r="4" fill="#1976D2"/>
          <circle cx="460" cy="133" r="4" fill="#1976D2"/>
          <circle cx="520" cy="153" r="4" fill="#1976D2"/>
          <circle cx="580" cy="173" r="4" fill="#D32F2F"/>
          <circle cx="640" cy="153" r="4" fill="#1976D2"/>
          <circle cx="700" cy="153" r="4" fill="#1976D2"/>
          <circle cx="750" cy="153" r="5" fill="#388E3C" stroke="#fff" stroke-width="2"/>
          <!-- Current price marker -->
          <text x="750" y="143" text-anchor="middle" fill="#388E3C" font-size="12" font-weight="600" font-family="'SF Mono', 'Roboto Mono', monospace">$349</text>
        </svg>
      </div>

      <!-- Stats Row: Lowest, Highest, Average -->
      <div class="price-stats" data-cjx-entrance>
        <div class="stat-card">
          <div class="stat-card-label">Lowest</div>
          <div class="stat-card-value success">$325.00</div>
        </div>
        <div class="stat-card">
          <div class="stat-card-label">Highest</div>
          <div class="stat-card-value danger">$449.00</div>
        </div>
        <div class="stat-card">
          <div class="stat-card-label">Average</div>
          <div class="stat-card-value">$389.00</div>
        </div>
      </div>

      <!-- Alert Section (logged in) -->
      <div class="alert-section" data-cjx-entrance>
        <h3>Price Alert</h3>
        <p class="text-secondary mb-md" style="font: var(--text-sm);">Get notified by email when the price drops to your target.</p>
        <div class="alert-form">
          <div class="input-group">
            <span class="input-prefix">AUD</span>
            <label for="alert-price" class="visually-hidden">Target price in AUD</label>
            <input id="alert-price" type="number" class="form-input" placeholder="e.g. 299.00" step="0.01" min="0" value="299.00" aria-label="Target price in AUD">
          </div>
          <button class="btn btn-primary" data-action="set-alert">Set Alert</button>
        </div>
      </div>

      <!-- Alert Section (guest view, hidden by default) -->
      <!--
      <div class="alert-section">
        <div class="alert-cta">
          <p>Sign in to set price alerts for this product.</p>
          <a href="s03-login.html" class="btn btn-primary">Sign In to Set Alerts</a>
        </div>
      </div>
      -->

      <!-- Price History Table (collapsible) -->
      <div data-cjx-entrance>
        <div class="collapsible-header">
          <h3>Recent Price History</h3>
          <span class="collapsible-toggle">&#9662;</span>
        </div>
        <div class="collapsible-body">
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Price</th>
                  <th>Change</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1 Mar 2026</td>
                  <td style="font-family: var(--font-mono);">$349.00</td>
                  <td><span class="price-change down"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:middle;width:14px;height:14px;"><path d="m6 9 6 6 6-6"/></svg> $0.00</span></td>
                </tr>
                <tr>
                  <td>25 Feb 2026</td>
                  <td style="font-family: var(--font-mono);">$349.00</td>
                  <td><span class="price-change down"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:middle;width:14px;height:14px;"><path d="m6 9 6 6 6-6"/></svg> $20.00</span></td>
                </tr>
                <tr>
                  <td>18 Feb 2026</td>
                  <td style="font-family: var(--font-mono);">$369.00</td>
                  <td><span class="price-change up"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:middle;width:14px;height:14px;"><path d="m18 15-6-6-6 6"/></svg> $4.00</span></td>
                </tr>
                <tr>
                  <td>11 Feb 2026</td>
                  <td style="font-family: var(--font-mono);">$365.00</td>
                  <td><span class="price-change down"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:middle;width:14px;height:14px;"><path d="m6 9 6 6 6-6"/></svg> $10.00</span></td>
                </tr>
                <tr>
                  <td>4 Feb 2026</td>
                  <td style="font-family: var(--font-mono);">$375.00</td>
                  <td><span class="price-change down"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:middle;width:14px;height:14px;"><path d="m6 9 6 6 6-6"/></svg> $5.00</span></td>
                </tr>
                <tr>
                  <td>28 Jan 2026</td>
                  <td style="font-family: var(--font-mono);">$380.00</td>
                  <td><span class="price-change down"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:middle;width:14px;height:14px;"><path d="m6 9 6 6 6-6"/></svg> $15.00</span></td>
                </tr>
                <tr>
                  <td>21 Jan 2026</td>
                  <td style="font-family: var(--font-mono);">$395.00</td>
                  <td><span class="price-change down"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:middle;width:14px;height:14px;"><path d="m6 9 6 6 6-6"/></svg> $5.00</span></td>
                </tr>
                <tr>
                  <td>14 Jan 2026</td>
                  <td style="font-family: var(--font-mono);">$400.00</td>
                  <td><span class="price-change up"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:middle;width:14px;height:14px;"><path d="m18 15-6-6-6 6"/></svg> $5.00</span></td>
                </tr>
                <tr>
                  <td>7 Jan 2026</td>
                  <td style="font-family: var(--font-mono);">$395.00</td>
                  <td><span class="price-change down"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:middle;width:14px;height:14px;"><path d="m6 9 6 6 6-6"/></svg> $30.00</span></td>
                </tr>
                <tr>
                  <td>1 Jan 2026</td>
                  <td style="font-family: var(--font-mono);">$425.00</td>
                  <td><span class="text-muted">—</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </main>
  </div>

  <script src="interactions.js"></script>
</body>
</html>
